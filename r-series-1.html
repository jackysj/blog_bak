
<!DOCTYPE html>
<html lang="zh">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="./theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/font-awesome.min.css">


    <link href="//jacky-sj/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jacky MSC Atom">


    <link rel="shortcut icon" href="/images/images.ico" type="image/x-icon">
    <link rel="icon" href="/images/images.ico" type="image/x-icon">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />


<meta name="author" content="Jacky Gong" />
<meta name="description" content="R 语言编程 1 - 基础内容" />
<meta name="keywords" content="r, data science">
<meta property="og:site_name" content="Jacky MSC"/>
<meta property="og:title" content="R语言记录1 ：基础"/>
<meta property="og:description" content="R 语言编程 1 - 基础内容"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="./r-series-1.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2014-03-06 15:27:00+08:00"/>
<meta property="article:modified_time" content="2017-03-29 20:30:00+08:00"/>
<meta property="article:author" content="./author/jacky-gong.html">
<meta property="article:section" content="R"/>
<meta property="article:tag" content="r"/>
<meta property="article:tag" content="data science"/>
<meta property="og:image" content="/images/images.png">

  <title>Jacky MSC &ndash; R语言记录1 ：基础</title>

</head>
<body>
  <aside>
    <div>
      <a href=".">
        <img src="/images/images.png" alt="Jacky MSC" title="Jacky MSC">
      </a>
      <h1><a href=".">Jacky MSC</a></h1>

<p>Thoughts and Writings</p>
      <nav>
        <ul class="list">

          <li><a href="http://jackycode.github.io" target="_blank">Old</a></li>
          <li><a href="mailto:blog@jacky-sj.com" target="_blank">Email</a></li>
          <li><a href="/about.html" target="_blank">About</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-weibo" href="http://weibo.com/jackycode" target="_blank"><i class="fa fa-weibo"></i></a></li>
        <li><a class="sc-github" href="https://github.com/jackysj" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-rss" href="/feeds/all.atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href=".">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="//jacky-sj/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
    <h1 id="r-series-1">R语言记录1 ：基础</h1>
    <p>
          Posted on 2014-03-06 in <a href="./category/r.html">R</a>


    </p>
  </header>


  <div>
    <p><em>“文章原创，转载请注明出处”</em></p>
<hr>
<h3>一. 配置与帮助</h3>
<p>很多时候我们希望软件可以根据我们的需要输出结果，比如我想将所有的结果小数都保留三位，那么就需要自己去更改设置，这时候就需要使用函数：<code>options(...)</code>。这个函数可以用来<strong><em>显示或设置当前的选项</em></strong>。运行<code>options()</code>，可以查看选项当前的设置，<code>help(options)</code>可以显示可用选项的说明。如果想要单独查看某一个设置，则需要使用函数<code>getOption(x, default=NULL)</code>。</p>
<p>可以运行这些代码以查看：</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="kp">options</span><span class="p">()</span></span>
<span class="code-line"><span class="kp">getOption</span><span class="p">(</span><span class="s">&quot;digits&quot;</span><span class="p">)</span></span>
<span class="code-line"><span class="kp">options</span><span class="p">(</span>digits<span class="o">=</span><span class="m">3</span><span class="p">)</span></span>
<span class="code-line"><span class="kp">getOption</span><span class="p">(</span><span class="s">&quot;digits&quot;</span><span class="p">)</span></span>
</pre></div>


<p>在学习一个软件之前，最重要的是知道在哪里才能获取帮助。R语言提供了强大的帮助系统，提供了已安装包中所有函数的细节、参考文献以及使用示例。以和函数<code>sum()</code>为例，你可以直接输入<code>help(sum)或?sum</code>查看函数<code>sum</code>的帮助，也可以输入<code>help.search(sum)或??sum</code>在本地以关键词<code>sum</code>进行搜索。你甚至可以直接输入<code>sum</code>得到该函数的源代码细节（这对于学习编程来说实在是太棒了）。</p>
<p>试试这些：</p>
<div class="highlight"><pre><span class="code-line"><span></span>help.start<span class="p">()</span> <span class="c1"># 打开帮助文档首页</span></span>
<span class="code-line"><span class="o">?</span><span class="kp">sum</span></span>
<span class="code-line"><span class="o">??</span><span class="kp">sum</span></span>
<span class="code-line"><span class="kp">sum</span><span class="p">()</span></span>
<span class="code-line"><span class="kp">sum</span></span>
</pre></div>


<h3>二. 控制语句</h3>
<h4>1. 循环语句</h4>
<div class="highlight"><pre><span class="code-line"><span></span><span class="kr">for</span> <span class="p">(</span>var <span class="kr">in</span> <span class="kp">seq</span><span class="p">)</span> expr</span>
</pre></div>


<p>即变量<em>var</em>从<em>seq</em>中依次取值，计算<em>expr</em>直到结束。例如：</p>
<div class="highlight"><pre><span class="code-line"><span></span>x <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">()</span></span>
<span class="code-line"><span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">))</span> x<span class="p">[</span>i<span class="p">]</span><span class="o">&lt;-</span>i<span class="o">*</span>i</span>
</pre></div>


<p>当然，R语言也支持<code>while</code>和<code>repeat</code>这类C语言风格的循环：</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="c1"># while loop</span></span>
<span class="code-line">i <span class="o">&lt;-</span> <span class="m">1</span></span>
<span class="code-line"><span class="kr">while</span> <span class="p">(</span>i <span class="o">&lt;=</span> <span class="m">3</span><span class="p">)</span> <span class="p">{</span></span>
<span class="code-line">    x<span class="p">[</span>i<span class="p">]</span> <span class="o">&lt;-</span> i<span class="o">*</span>i</span>
<span class="code-line">    i <span class="o">&lt;-</span> i<span class="m">+1</span></span>
<span class="code-line"><span class="p">}</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1"># another while loop</span></span>
<span class="code-line">i <span class="o">&lt;-</span> <span class="m">1</span></span>
<span class="code-line"><span class="kr">while</span> <span class="p">(</span><span class="kc">TRUE</span><span class="p">)</span> <span class="p">{</span></span>
<span class="code-line">    x<span class="p">[</span>i<span class="p">]</span> <span class="o">&lt;-</span> i<span class="o">*</span>i</span>
<span class="code-line">    i <span class="o">&lt;-</span> i<span class="m">+1</span></span>
<span class="code-line">    <span class="kr">if</span> <span class="p">(</span>i <span class="o">&gt;</span> <span class="m">3</span><span class="p">)</span> <span class="kr">break</span></span>
<span class="code-line"><span class="p">}</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1"># repeat loop</span></span>
<span class="code-line">i <span class="o">&lt;-</span> <span class="m">1</span></span>
<span class="code-line"><span class="kr">repeat</span> <span class="p">{</span></span>
<span class="code-line">    x<span class="p">[</span>i<span class="p">]</span> <span class="o">&lt;-</span> i<span class="o">*</span>i</span>
<span class="code-line">    i <span class="o">&lt;-</span> i<span class="m">+1</span></span>
<span class="code-line">    <span class="kr">if</span> <span class="p">(</span>i <span class="o">&gt;</span> <span class="m">3</span><span class="p">)</span> <span class="kr">break</span></span>
<span class="code-line"><span class="p">}</span></span>
<span class="code-line"><span class="o">==========================</span></span>
</pre></div>


<h5>非向量集合上的循环</h5>
<p>R语言并不直接支持在非向量结合上做循环，但是我们可以用函数<code>apply()</code>,<code>sapply()</code>,<code>lapply()</code>以及<code>tapply</code>来避开循环得到想要的结果。</p>
<p>比如上面的例子，对集合{1, 2, 3}中每一个元素求平方得到新的集合：</p>
<div class="highlight"><pre><span class="code-line"><span></span>i <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span></span>
<span class="code-line">Fun <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="p">{</span></span>
<span class="code-line">    y <span class="o">&lt;-</span> x<span class="o">*</span>x</span>
<span class="code-line"><span class="p">}</span></span>
<span class="code-line">x <span class="o">&lt;-</span> <span class="kp">lapply</span><span class="p">(</span>i<span class="p">,</span> Fun<span class="p">)</span></span>
</pre></div>


<p>使用<code>apply()</code>函数，还可以简单地对一个矩阵按行(按列)求和(任意函数)。</p>
<div class="highlight"><pre><span class="code-line"><span></span>a <span class="o">&lt;-</span> <span class="kt">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">12</span><span class="p">,</span> nrow<span class="o">=</span><span class="m">4</span><span class="p">)</span></span>
<span class="code-line">b <span class="o">&lt;-</span> <span class="kp">apply</span><span class="p">(</span>a<span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="kp">sum</span><span class="p">)</span></span>
<span class="code-line"><span class="kt">c</span> <span class="o">&lt;-</span> <span class="kp">apply</span><span class="p">(</span>a<span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="kp">sum</span><span class="p">)</span></span>
</pre></div>


<h4>2. 条件语句</h4>
<p>跟C语言类似：</p>
<div class="highlight"><pre><span class="code-line"><span></span>r <span class="o">&lt;-</span> <span class="m">3</span></span>
<span class="code-line"><span class="kr">if</span> <span class="p">(</span>r <span class="o">==</span> <span class="m">4</span><span class="p">)</span> <span class="p">{</span></span>
<span class="code-line">    x <span class="o">&lt;-</span> <span class="m">1</span></span>
<span class="code-line"><span class="p">}</span> <span class="kr">else</span> <span class="p">{</span></span>
<span class="code-line">    x <span class="o">&lt;-</span> <span class="m">3</span></span>
<span class="code-line"><span class="p">}</span></span>
</pre></div>


<h4>3. 自定义函数</h4>
<div class="highlight"><pre><span class="code-line"><span></span><span class="kr">function</span> <span class="p">(</span><span class="o">&lt;</span>formal arguments<span class="o">&gt;</span><span class="p">)</span> <span class="kp">body</span></span>
</pre></div>


<p>使用上面的例子：</p>
<div class="highlight"><pre><span class="code-line"><span></span>Fun <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="p">{</span></span>
<span class="code-line">    y <span class="o">&lt;-</span> x<span class="o">*</span>x</span>
<span class="code-line"><span class="p">}</span></span>
<span class="code-line">a <span class="o">&lt;-</span> <span class="m">2</span></span>
<span class="code-line">b <span class="o">&lt;-</span> Fun<span class="p">(</span>a<span class="p">)</span></span>
</pre></div>


<p>学习这么多之后，我们就可以使用R做点小事情了。但是这还没有涉及到R语言自身的东西，毕竟上面的这些能力哪个编程语言没有。</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/r.html">r</a>
      <a href="./tag/data-science.html">data science</a>
    </p>
  </div>


    <div class="addthis_relatedposts_inline">


<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'jacky-msc';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
</article>

    <footer>
<p>
  &copy; Jacky Gong 2014-2017 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
         src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Jacky MSC ",
  "url" : ".",
  "image": "/images/images.png",
  "description": ""
}
</script>

</body>
</html>